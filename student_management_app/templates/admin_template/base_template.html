{% load static %}

<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Alim's Academy | Dashboard</title>
	<!-- Tell the browser to be responsive to screen width -->
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="shortcut icon" href="{% static 'logo.png' %}" type="image/x-icon">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
		integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/themes/base/jquery-ui.min.css"
		integrity="sha512-ELV+xyi8IhEApPS/pSj66+Jiw+sOT1Mqkzlh8ExXihe4zfqbWkxPRi8wptXIO9g73FSlhmquFlUOuMSoXz5IRw=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!-- Ionicons -->
	<link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/css/tempusdominus-bootstrap-4.min.css"
		integrity="sha512-3JRrEUwaCkFUBLK1N8HehwQgu8e23jTH4np5NHOmQOobuC4ROQxFwFgBLTnhcnQRMs84muMh0PnnwXlPq5MGjg=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!-- iCheck -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css"
		integrity="sha512-8vq2g5nHE062j3xor4XxPeZiPjmRDh6wlufQlfC6pdQ/9urJkU07NM0tEREeymP++NczacJ/Q59ul+/K2eYvcg=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!-- JQVMap -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/jqvmap.min.css"
		integrity="sha512-RPxGl20NcAUAq1+Tfj8VjurpvkZaep2DeCgOfQ6afXSEgcvrLE6XxDG2aacvwjdyheM/bkwaLVc7kk82+mafkQ=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!-- Theme style -->
	<!-- <link rel="stylesheet" href="{% static 'dist/css/adminlte.min.css'  %}"> -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.1/dist/css/adminlte.min.css">
	<!-- overlayScrollbars -->
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.13.3/css/OverlayScrollbars.css"
		integrity="sha512-LSGPGnehGYGsh7/QTPRwe1VGplv3tVHmlDw6hI/hrEYaaI0OBFE2x6Pdo8DdAKIkJuYfbShXwDjq/SJxbsE9Tg=="
		crossorigin="anonymous" referrerpolicy="no-referrer" />
	<!-- Daterange picker -->
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
	<!-- summernote -->
	<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.css" rel="stylesheet">
	<!-- Google Font: Source Sans Pro -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">

	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.3/css/jquery.dataTables.css">

	<style>
		#table_id_wrapper {
			padding: 5px;
		}
ul {
  list-style: none;
  margin: 0;
  padding: 0;
}

.notification-drop {
  font-family: 'Ubuntu', sans-serif;
  color: #444;
}
.notification-drop .item {
  padding: 10px;
  font-size: 18px;
  position: relative;
  border-bottom: 1px solid #ddd;
  
}
.notification-drop .item:hover {
  cursor: pointer;
}
.notification-drop .item ul {
  display: none;
  position: absolute;
  top: 100%;
  background: #fff;
  height: 450px;
  width: 330px;
  left: -245px;
  right: 0;
  z-index: 1;
  border-top: 1px solid #ddd;
}

.notification-drop .item i {
  margin-left: 10px;
}

.notification-drop .item ul li {
  font-size: 16px;
  padding: 15px 0 15px 25px;
  border-top: 1px solid rgb(165, 165, 165);
}
.notification-drop .item ul li:hover {
  background: #ddd;
  color: rgba(0, 0, 0, 0.8);
}

@media screen and (min-width: 500px) {
  .notification-drop {
    display: flex;
    justify-content: flex-end;
  }
  
  .notification-drop .item {
    border: none;
  }
  .notification-drop .item ul {
  display: none;
  position: absolute;
  top: 100%;
  background: #fff;
  height: 360px;
  width: 450px;
  left: -350px;
  right: 0;
  z-index: 1;
  border-top: 1px solid #ddd;
}
 
}



.notification-bell{
  font-size: 20px;
}

.btn__badge {
  background: #FF5D5D;
  color: white;
  font-size: 12px;
  position: absolute;
  top: 0;
  right: 0px;
  padding:  3px 10px;
  border-radius: 50%;
}

.pulse-button {
  box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.5);
  -webkit-animation: pulse 1.5s ;
}

.pulse-button:hover {
  -webkit-animation: none;
}

@-webkit-keyframes pulse {
  0% {
    -moz-transform: scale(0.9);
    -ms-transform: scale(0.9);
    -webkit-transform: scale(0.9);
    transform: scale(0.9);
  }
  70% {
    -moz-transform: scale(1);
    -ms-transform: scale(1);
    -webkit-transform: scale(1);
    transform: scale(1);
    box-shadow: 0 0 0 50px rgba(255, 0, 0, 0);
  }
  100% {
    -moz-transform: scale(0.9);
    -ms-transform: scale(0.9);
    -webkit-transform: scale(0.9);
    transform: scale(0.9);
    box-shadow: 0 0 0 0 rgba(255, 0, 0, 0);
  }
}

.notification-text{
  font-size: 14px;
  font-weight: bold;
}

.notification-text span{
  float: right;
}
		

	</style>
	{% comment %} For Custom CSS {% endcomment %} {% block custom_css %} {% endblock custom_css %}
	<script src="{% static 'customJS/vueGlobal.js' %}"></script>
	<script src="{% static 'customJS/vueRouter.js' %}"></script>
</head>

<body id="body" class="hold-transition sidebar-mini layout-fixed">
	<div class="wrapper" id="base_app">
		<!-- Navbar -->
		<nav class="main-header navbar navbar-expand navbar-white navbar-light">
			<!-- Left navbar links -->
			<ul class="navbar-nav">
				<li class="nav-item">
					<a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
				</li>
			</ul>

			<h4 style="margin-left: 10px; margin-top: 5px">
				Dashboard | Head Of the Department
			</h4>

			<ul class="navbar-nav ml-auto">
				<li class="nav-item dropdown">
					<ul class="notification-drop">
						<li class="item">
						  <i class="fa fa-bell notification-bell" aria-hidden="true"></i> <span class="btn__badge pulse-button ">[[notification_numbers]]</span>     
						  <ul class="overflow-auto shadow-lg bg-white rounded">
							<li style="width: 100%; padding: 5px; height: 30px ; background-color: #444; display: flex; justify-content: end;" >
								<p @click="clickedSeenAll" style="font-size:14px; color: #c3c3c3!important;" class="mr-3">Mark All as Read</p>
							</li>
							<li v-for="notification in notifications" key="notification.id" :style="[notification.status ? {'color':'#9b9595'} : {'color':'#00000'}]" @click="clickedNotification(notification.id,notification.link)">[[notification.title]]</li>
						  </ul>
						</li>
					  </ul>
				</li>
				<!-- Notifications Dropdown Menu -->
				<li class="nav-item dropdown">
					<a class="nav-link" data-toggle="dropdown" href="#" aria-expanded="false">
						<i class="fas fa-cog"></i>
					</a>
					<div class="dropdown-menu dropdown-menu-lg dropdown-menu-right" style="left: inherit; right: 0px">
						<a href="{% url 'admin_profile' %}" class="dropdown-item">
							<i class="fas fa-user-edit mr-2"></i> Update Profile
						</a>

						<div class="dropdown-divider"></div>
						<a href="{% url 'logout_user' %}" class="dropdown-item">
							<i class="fas fa-power-off mr-2"></i> Logout
						</a>
						<div class="dropdown-divider"></div>
					</div>
				</li>
			</ul>
		</nav>
		<!-- /.navbar -->

		<!-- Main Sidebar Container -->
		{% include 'admin_template/sidebar_template.html' with user=user id=id %}

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<div class="content-header">
				<div class="container-fluid">
					<div class="row mb-2">
						<div class="col-sm-6">
							<h1 class="m-0 text-dark">
								{% block page_title %} {% endblock page_title %}
							</h1>
						</div>
						<!-- /.col -->
						<div class="col-sm-6">
							<ol class="breadcrumb float-sm-right">
								<li class="breadcrumb-item">
									<a href="{% url 'admin_home' %}">Home</a>
								</li>
							</ol>
						</div>
						<!-- /.col -->
					</div>
					<!-- /.row -->
				</div>
				<!-- /.container-fluid -->
			</div>
			<!-- /.content-header -->

			<!-- Main content -->
			{% block main_content %} {% endblock main_content %}
			<!-- /.content -->
		</div>
		<!-- /.content-wrapper -->
		{% include 'admin_template/footer.html' %}
	</div>
	<!-- ./wrapper -->


	<!-- jQuery -->
	<!-- <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script> -->
	<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
		integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"
		integrity="sha512-aVKKRRi/Q/YV+4mjoKBsE4x3H+BkegoM/em46NNlCqNTmUYADjBbeNefNxYV7giUp0VxICtqdrbqU7iVaeZNXA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
		integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
		integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
		crossorigin="anonymous"></script>
	<!-- jQuery UI 1.11.4 -->
	<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.js"
		integrity="sha256-DI6NdAhhFRnO2k51mumYeDShet3I8AKCQf/tf7ARNhI=" crossorigin="anonymous"></script>

	<!-- Bootstrap 4 -->
	<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js" integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous"></script>  -->
	<!-- ChartJS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"
		integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!-- JQVMap -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/jquery.vmap.min.js"
		integrity="sha512-Zk7h8Wpn6b9LpplWXq1qXpnzJl8gHPfZFf8+aR4aO/4bcOD5+/Si4iNu9qE38/t/j1qFKJ08KWX34d2xmG0jrA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqvmap/1.5.1/maps/jquery.vmap.usa.js"></script>
	<!-- jQuery Knob Chart -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jQuery-Knob/1.2.13/jquery.knob.min.js"
		integrity="sha512-NhRZzPdzMOMf005Xmd4JonwPftz4Pe99mRVcFeRDcdCtfjv46zPIi/7ZKScbpHD/V0HB1Eb+ZWigMqw94VUVaw=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!-- daterangepicker -->
	<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<!-- Tempusdominus Bootstrap 4 -->
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/tempusdominus-bootstrap-4/5.39.0/js/tempusdominus-bootstrap-4.min.js"
		integrity="sha512-k6/Bkb8Fxf/c1Tkyl39yJwcOZ1P4cRrJu77p83zJjN2Z55prbFHxPs9vN7q3l3+tSMGPDdoH51AEU8Vgo1cgAA=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!-- Summernote -->
	<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote.min.js"></script>
	<!-- overlayScrollbars -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/overlayscrollbars/1.13.3/js/OverlayScrollbars.min.js"
		integrity="sha512-Ae2SccSxoNp/Cn7PIlowLk8cmVyyW5aSCbrB/k08h/yYeK3zrNJ/oAJf8RK/ZD95G8KjkzPIXxKbeYPn43KC0w=="
		crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<!-- AdminLTE App -->
	<!-- <script src="{% static 'dist/js/adminlte.js'  %}"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.1/dist/js/adminlte.min.js"></script>
	<!-- AdminLTE dashboard demo (This is only for demo purposes) -->
	<script src="{% static 'dist/js/pages/dashboard.js'  %}"></script>
	<!-- AdminLTE for demo purposes -->
	<script src="{% static 'dist/js/demo.js'  %}"></script>
	<script type="text/javascript" charset="utf8"
		src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.js"></script>
	<!-- Sparkline -->
	<script src="{% static 'sparklines/sparkline.js' %}"></script>
	<script>
		$(document).ready(function() {
  $(".notification-drop .item").on('click',function() {
    $(this).find('ul').toggle();
  });
});
	</script>

<!-- <script src="{% static 'customJS/vue.js' %}"></script> -->
<script>
	const app = Vue.createApp({
    delimiters: ["[[", "]]"],
    data() {
        return {
            notification_numbers: 0,
            notifications: [],
        };
    },
    mounted() {
        this.get_notifications();
        
    },
    methods: {
        clickedSeenAll(){
            let self = this
            $.ajax({
            url: window.location.origin+"/seen_all_notifications/",
            type: "POST",
            success: function(data){
                if(data.status == 'All Seen'){
                    self.get_notifications();
                }else{
                    console.log(data)
                }
            }
        });
        },
         clickedNotification(id,link){
            let self = this
            $.ajax({
            url: window.location.origin+"/seen_notification/"+id+"/",
            type: "POST",
            success: function(data){
                if(data.status == 'seen'){
                    self.get_notifications();
                    window.location.href = link;
                }else{
                    console.log(data)
                }
            }
        });
        },
        get_notifications() {
            let self = this;
            $.ajax({
                url: "{% url 'get_not_number' %}",
                type: "POST",
                data: {

                },
                success: function (data) {
                    self.notification_numbers = data.notnmb[0].notf
                    self.notifications = data.notifications
                },
            });
        }
    }
});
app.mount("#base_app");

</script>
<script>
	$(document).ready(function () {
        
        
        $("#bttnToday").click(function () {

            var now = new Date();

            var day = ("0" + now.getDate()).slice(-2);
            var month = ("0" + (now.getMonth() + 1)).slice(-2);

            var today = now.getFullYear() + "-" + (month) + "-" + (day);

            $('#inputVal').val(today);

            // console.log(today)


        });

        $("#bttn2Today").click(function () {

            var now = new Date();

            var day = ("0" + now.getDate()).slice(-2);
            var month = ("0" + (now.getMonth() + 1)).slice(-2);

            var today = now.getFullYear() + "-" + (month) + "-" + (day);

            $('#inputVal2').val(today);

            // console.log(today)


        });

    });
</script>
{% comment %} For Custom JS {% endcomment %} {% block custom_js %}
{% endblock custom_js %}
	
</body>

</html>